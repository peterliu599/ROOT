% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/core_functions.R
\name{loss}
\alias{loss}
\title{Evaluate splitting objective loss for a given weight assignment}
\usage{
loss(val, indices, D)
}
\arguments{
\item{val}{Numeric scalar (must be 0 or 1). The weight value to assign (0 = exclude, 1 = include).}

\item{indices}{Indices or row names in \code{D} for which the weight should be set to \code{val}. Can be a numeric vector of row positions or a character vector of row names.}

\item{D}{A data frame containing at least columns \code{vsq} (squared pseudo-outcome) and \code{w} (current weights).}
}
\value{
Numeric value representing the loss, defined as \eqn{\sqrt{\sum_i vsq_i * w_i \,/\, (\sum_i w_i)^2}}. Returns \code{Inf} if the denominator is 0 or if the result is not a number.
}
\description{
Computes the approximate standard error (loss) of the treatment effect estimate under a hypothetical assignment of weights \code{w} for specified rows.
}
\note{
This function mimics the behavior of numpy's \code{nan_to_num(..., nan=Inf)} by returning \code{Inf} when the computation is undefined (e.g., no weights selected). It is used internally to decide whether a proposed split improves the objective.
}
\examples{
# Create a small example data frame D
D <- data.frame(vsq = c(0.5, 1.0, 0.2), w = c(1, 1, 1))
loss(0, indices = 2, D)  # Set w=0 for row 2 and compute loss
loss(1, indices = c(2,3), D)  # Set w=1 for rows 2 and 3 and compute loss
}
