% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/characterizing_underrep.R
\name{characterizing_underrep}
\alias{characterizing_underrep}
\title{Characterize under-represented subgroups (wraps \code{ROOT})}
\usage{
characterizing_underrep(
  DataRCT,
  covariateColName_RCT,
  trtColName_RCT,
  outcomeColName_RCT,
  DataTarget,
  covariateColName_TargetData,
  leaf_proba = 0.25,
  seed = 123,
  num_trees = 10,
  vote_threshold = 2/3,
  explore_proba = 0.05,
  feature_est = "Ridge",
  feature_est_args = list(),
  top_k_trees = FALSE,
  k = 10,
  cutoff = "baseline",
  verbose = FALSE,
  global_objective_fn = objective_default,
  keep_threshold = 0.5,
  lX_threshold = NULL
)
}
\arguments{
\item{DataRCT}{A \code{data.frame} containing the randomized clinical trial data.
Must include treatment, outcome, and covariate columns.}

\item{covariateColName_RCT}{A \code{character} vector of covariate column names in \code{DataRCT}.}

\item{trtColName_RCT}{A \code{character(1)} naming the treatment column in \code{DataRCT} with values \code{0} or \code{1}.}

\item{outcomeColName_RCT}{A \code{character(1)} naming the outcome column in \code{DataRCT}.}

\item{DataTarget}{A \code{data.frame} containing the target population covariates only.}

\item{covariateColName_TargetData}{A \code{character} vector of covariate column names in \code{DataTarget}.}

\item{leaf_proba}{A \code{numeric(1)} giving the probability for the \code{"leaf"} option in \code{ROOT} tree growth. Default \code{0.25}.}

\item{seed}{An \code{integer(1)} seed for reproducibility. Default \code{123}.}

\item{num_trees}{An \code{integer(1)} number of trees to grow. Default \code{10}.}

\item{vote_threshold}{A \code{numeric(1)} in \code{(0.5, 1]} for the majority vote threshold. Default \code{2/3}.}

\item{explore_proba}{A \code{numeric(1)} exploration probability. Default \code{0.05}.}

\item{feature_est}{Either a \code{character(1)} in \code{c("Ridge","GBM")} or a \code{function(X, y, ...)} that returns a named nonnegative \code{numeric} vector of importances.}

\item{feature_est_args}{A named \code{list} of extra arguments passed to the user supplied \code{feature_est} function.}

\item{top_k_trees}{A \code{logical(1)}. If \code{TRUE}, selects top \code{k} trees by objective; otherwise uses \code{cutoff}. Default \code{FALSE}.}

\item{k}{An \code{integer(1)} number of trees used when \code{top_k_trees = TRUE}. Default \code{10}.}

\item{cutoff}{A \code{numeric(1)} or the value \code{"baseline"} used as the Rashomon set cutoff when \code{top_k_trees = FALSE}.}

\item{verbose}{A \code{logical(1)}. If \code{TRUE}, prints progress and estimand summaries. Default \code{FALSE}.}

\item{global_objective_fn}{A \code{function} with signature \code{function(D) -> numeric} to minimize. Default \code{objective_default}.}

\item{keep_threshold}{Unused; kept for backward compatibility. A \code{numeric(1)} if provided.}

\item{lX_threshold}{Unused; kept for backward compatibility. A \code{numeric(1)} if provided.}
}
\value{
A \code{characterizing_underrep} S3 object (a \code{list}) with components:
\item{root}{The resulting \code{ROOT} object returned by \code{ROOT()}.}
\item{combined}{A \code{data.frame} with the stacked RCT and target data used for analysis.}
\item{leaf_summary}{A \code{data.frame} of terminal node summaries with rules, counts, percentages, and labels when a summary tree exists; otherwise \code{NULL}.}
}
\description{
Combines an RCT (\code{S = 1}) and a target dataset (\code{S = 0}), then calls \code{ROOT()} to
learn a weighted tree that identifies subgroups with different representation
in the target population compared to the trial.
}
\section{Abbreviations}{

RCT means randomized clinical trial. ATE means Average Treatment Effect.
WTATE means Weighted Transported ATE. SE means Standard Error.
}

\examples{
\dontrun{
# Load example data
data(diabetes_data)

# Split into Trial (S=1) and Target (S=0)
trial  <- subset(diabetes_data, S == 1)
target <- subset(diabetes_data, S == 0)

# Run characterization
res <- characterizing_underrep(
  DataRCT = trial,
  covariateColName_RCT = c("Race_Black", "Sex_Male", "DietYes", "Age45"),
  trtColName_RCT = "Tr",
  outcomeColName_RCT = "Y",
  DataTarget = target,
  covariateColName_TargetData = c("Race_Black", "Sex_Male", "DietYes", "Age45"),
  seed = 123
)
}
}
\references{
Parikh, H., Ross, R. K., Stuart, E., and Rudolph, K. E. (2025).
Who Are We Missing?: A Principled Approach to Characterizing the Underrepresented Population.
\emph{Journal of the American Statistical Association}, 1â€“32.
}
