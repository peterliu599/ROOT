% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ROOT.R
\name{ROOT}
\alias{ROOT}
\title{Ensemble of weighted trees (loss/objective-agnostic) and Rashomon selection}
\usage{
ROOT(
  data,
  outcome,
  treatment,
  sample,
  leaf_proba = 0.25,
  seed = NULL,
  num_trees = 10,
  vote_threshold = 2/3,
  explore_proba = 0.05,
  feature_est = "Ridge",
  feature_est_args = list(),
  top_k_trees = FALSE,
  k = 10,
  cutoff = "baseline",
  verbose = FALSE,
  objective_fn = objective_default,
  loss_fn = NULL,
  plot_tree = TRUE,
  plot_tree_args = list(type = 2, extra = 109, under = TRUE, faclen = 0, tweak = 1.1,
    fallen.leaves = TRUE, box.palette = c("pink", "palegreen3"), shadow.col = c("gray"),
    branch.lty = 3, main = "Final Characterized Tree from Rashomon Set")
)
}
\arguments{
\item{data}{A data frame containing the dataset (must include outcome, treatment, sample indicator).}

\item{outcome}{Name of the outcome column in \code{data}.}

\item{treatment}{Name of the treatment indicator column (0/1) in \code{data}.}

\item{sample}{Name of the sample indicator column (0/1) in \code{data}. Use NULL for single-sample SATE mode.}

\item{leaf_proba}{Probability mass for the "leaf" option in each tree (default 0.25).}

\item{seed}{Integer seed for reproducibility (default NULL).}

\item{num_trees}{Number of trees to grow in the forest (default 10).}

\item{vote_threshold}{Majority vote threshold in (0.5, 1] for final weight=1 (default 2/3).}

\item{explore_proba}{Probability of exploration at leaves in each tree (default 0.05).}

\item{feature_est}{"Ridge", "GBM", or a function(X, y, ...) returning a named, non-negative
vector of importances; normalized to probabilities (default "Ridge").}

\item{feature_est_args}{Named list of extra args for a user-supplied \code{feature_est} function.}

\item{top_k_trees}{If TRUE, select top-k trees by objective; else use \code{cutoff} (default FALSE).}

\item{k}{Number of top trees if \code{top_k_trees = TRUE} (default 10).}

\item{cutoff}{If \code{top_k_trees = FALSE}, numeric cutoff or "baseline" (default "baseline").
With "baseline", the cutoff is computed by evaluating \code{objective_fn} on the state with all \code{w=1}.}

\item{verbose}{If TRUE, prints 2 lines with (unweighted and weighted) estimate + SE. Default FALSE.}

\item{objective_fn}{Function \code{function(D) -> numeric} that scores the \strong{entire state} (minimize).
Default \code{objective_default()} reproduces prior behavior (SE proxy of PATE/TATE using \code{vsq} and \code{w}).}

\item{loss_fn}{Optional micro-evaluator \code{function(val, indices, D) -> numeric} that returns the
objective after hypothetically setting \code{w=val} on \code{indices}. If \code{NULL}, ROOT wraps \code{objective_fn}
via \code{loss_from_objective(objective_fn)}.}

\item{plot_tree}{If TRUE, plots the characterized tree (default TRUE). Guarded by \code{interactive()}.}

\item{plot_tree_args}{Named list forwarded to \code{rpart.plot::rpart.plot()}.}
}
\value{
S3 object of class "ROOT" with components:
D_rash, D_forest, w_forest, rashomon_set, f, testing_data, tree_plot, estimate
}
\description{
Builds multiple weighted trees, then identifies a "Rashomon set" of
top-performing trees and aggregates their weight assignments by majority vote.
}
