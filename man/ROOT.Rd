% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ROOT.R
\name{ROOT}
\alias{ROOT}
\title{Ensemble of weighted trees (loss/objective agnostic) and Rashomon selection}
\usage{
ROOT(
  data,
  outcome,
  treatment,
  sample,
  leaf_proba = 0.25,
  seed = NULL,
  num_trees = 10,
  vote_threshold = 2/3,
  explore_proba = 0.05,
  feature_est = "Ridge",
  feature_est_args = list(),
  top_k_trees = FALSE,
  k = 10,
  cutoff = "baseline",
  verbose = FALSE,
  global_objective_fn = objective_default
)
}
\arguments{
\item{data}{A \code{data.frame} containing the dataset. Must include outcome, treatment, and sample indicator columns.}

\item{outcome}{A \code{character(1)} specifying the name of the outcome column in \code{data}.}

\item{treatment}{A \code{character(1)} specifying the name of the treatment indicator column in \code{data}. Values should be \code{0} or \code{1}.}

\item{sample}{A \code{character(1)} specifying the name of the sample indicator column in \code{data} with values \code{0} or \code{1}. Use \code{NULL} for single sample SATE mode.}

\item{leaf_proba}{A \code{numeric(1)} giving the probability mass for the \code{"leaf"} option in each tree. Default \code{0.25}.}

\item{seed}{An optional \code{numeric(1)} seed for reproducibility. Default \code{NULL}.}

\item{num_trees}{An \code{integer(1)} giving the number of trees to grow in the forest. Default \code{10}.}

\item{vote_threshold}{A \code{numeric(1)} in \code{(0.5, 1]} giving the majority vote threshold for final \code{weight = 1}. Default \code{2/3}.}

\item{explore_proba}{A \code{numeric(1)} giving the probability of exploration at leaves in each tree. Default \code{0.05}.}

\item{feature_est}{Either a \code{character(1)} in \code{c("Ridge","GBM")} or a \code{function(X, y, ...)} returning a named nonnegative \code{numeric} vector of importances where names match columns of \code{X}.}

\item{feature_est_args}{A \code{list} of extra arguments passed to a user supplied \code{feature_est} function.}

\item{top_k_trees}{A \code{logical(1)}. If \code{TRUE}, select top \code{k} trees by objective; otherwise use \code{cutoff}. Default \code{FALSE}.}

\item{k}{An \code{integer(1)} giving the number of top trees used when \code{top_k_trees = TRUE}. Default \code{10}.}

\item{cutoff}{A \code{numeric(1)} or the \code{character(1)} value \code{"baseline"}. Used as the Rashomon set cutoff when \code{top_k_trees = FALSE}.}

\item{verbose}{A \code{logical(1)}. If \code{TRUE}, prints two lines with unweighted and weighted estimates and their SE. Default \code{FALSE}.}

\item{global_objective_fn}{A \code{function} with signature \code{function(D) -> numeric} that scores the entire state and is minimized. Default \code{objective_default}.}
}
\value{
An S3 object of class \code{"ROOT"} which is a \code{list} with elements including:
\item{D_rash}{\code{data.frame} that contains the Rashomon set votes and \code{w_opt}.}
\item{D_forest}{\code{data.frame} with forest level working columns including \code{v}, \code{vsq}, \code{S}, and the \code{w_tree_*} columns.}
\item{w_forest}{\code{list} of per tree results returned by \code{split_node()}.}
\item{rashomon_set}{\code{integer} vector of selected tree indices.}
\item{global_objective_fn}{The \code{function} used for the global objective.}
\item{f}{An \code{rpart} object for the summary tree or \code{NULL} when no covariates exist.}
\item{testing_data}{\code{data.frame} aligned to the rows used to compute scores.}
\item{estimate}{\code{list} with elements \code{estimand_unweighted}, \code{value_unweighted}, \code{se_unweighted}, \code{estimand_weighted}, \code{value_weighted}, \code{se_weighted}, \code{se_weighted_note}, \code{n_analysis}, \code{sum_w}, \code{n_A}.}
}
\description{
Builds multiple weighted trees, then identifies a "Rashomon set" of
top performing trees and aggregates their weight assignments by majority vote.
}
\section{Abbreviations}{

ATE means Average Treatment Effect. SATE means Sample Average Treatment Effect.
WTATE means Weighted Transported ATE. WATE means Weighted ATE.
PATE means Population ATE. SE means Standard Error.
}

\examples{
\dontrun{
# Load example data
data(diabetes_data)

# Run ROOT
res <- ROOT(data = diabetes_data, outcome = "Y", treatment = "Tr", sample = "S")
}
}
\references{
Parikh, H., Ross, R. K., Stuart, E., and Rudolph, K. E. (2025).
Who Are We Missing?: A Principled Approach to Characterizing the Underrepresented Population.
\emph{Journal of the American Statistical Association}, 1â€“32.
}
