% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/treeBuilding.R
\name{split_node}
\alias{split_node}
\title{Recursive split builder for weighted tree}
\usage{
split_node(
  split_feature,
  X,
  D,
  parent_loss,
  depth,
  explore_proba = 0.05,
  choose_feature_fn = choose_feature,
  reduce_weight_fn = reduce_weight,
  global_objective_fn = objective_default,
  max_depth = 8,
  min_leaf_n = 5,
  log_fn = function(...) {
 },
  max_rejects_per_node = 1000
)
}
\arguments{
\item{split_feature}{A named \code{numeric} vector of feature selection probabilities. Must include the name \code{"leaf"}.}

\item{X}{A \code{data.frame} of current observations. Includes candidate split feature columns and may include a working copy of weights \code{w}.}

\item{D}{A \code{data.frame} representing the global state. Must include columns \code{w} and \code{vsq}. Row names must align to \code{X}.}

\item{parent_loss}{A \code{numeric(1)} giving the loss of the parent node. Used to decide if a split improves the objective.}

\item{depth}{An \code{integer(1)} giving the current tree depth.}

\item{explore_proba}{A \code{numeric(1)} between \code{0} and \code{1} for the probability of flipping the exploit choice at a leaf.}

\item{choose_feature_fn}{A \code{function} to choose the next feature. Default is \code{choose_feature}.}

\item{reduce_weight_fn}{A \code{function} to penalize the last tried feature on a rejected split. Default is \code{reduce_weight}.}

\item{global_objective_fn}{A \code{function} with signature \code{function(D) -> numeric} that scores the entire state.}

\item{max_depth}{An \code{integer(1)} giving the maximum depth. A node becomes a leaf at this depth.}

\item{min_leaf_n}{An \code{integer(1)} giving the minimum number of rows to attempt a split. Otherwise make a leaf.}

\item{log_fn}{A \code{function} for logging. Default is a function that performs no operation.}

\item{max_rejects_per_node}{An \code{integer(1)} giving the safety budget of rejected splits before forcing a leaf.}
}
\value{
A \code{list} representing the subtree. Includes updated \code{D} and a field named \code{"local objective"}.
}
\description{
Recursively builds a weighted decision tree to optimize a global objective,
using an exploration versus exploitation choice at leaves. Internal and used by \code{ROOT()}.
}
